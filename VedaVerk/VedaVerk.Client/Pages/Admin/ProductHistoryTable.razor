@if (Products == null)
{
    <p class="text-muted">Laddar...</p>
}
else if (!Products.Any())
{
    <div class="alert alert-light text-center">
        Ingen historik att visa i denna kategori.
    </div>
}
else
{
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th>Namn</th>
                    <th>Datum</th>
                    <th>Pris</th>
                    <th class="text-end">Åtgärder</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var product in Products.OrderByDescending(p => p.ActiveFrom))
                {
                    <tr>
                        <td class="fw-bold">@product.Name</td>
                        <td>@product.ActiveFrom.ToString("yyyy-MM-dd")</td>
                        <td>@product.ActiveTo.ToString("yyyy-MM-dd")</td>
                        <td>@product.Price kr</td>

                        <td class="text-end">
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-outline-secondary"
                                        title="Redigera"
                                        @onclick="() => OnEdit.InvokeAsync(product)">
                                    <i class="bi bi-pencil"></i>
                                </button>

                                <button class="btn btn-outline-danger"
                                        title="Ta bort"
                                        @onclick="() => OnDelete.InvokeAsync(product.Id)">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

@code {
    [Parameter] public List<ResponseProductDTO> Products { get; set; } = new();

    // Callbacks to notify the parent (Dashboard) when buttons are clicked
    [Parameter] public EventCallback<ResponseProductDTO> OnEdit { get; set; }
    [Parameter] public EventCallback<int> OnDelete { get; set; }
}